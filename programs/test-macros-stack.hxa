# Testing stack macros

@START
CALL >DROP_TEST
CALL >DROP1_TEST
CALL >DUP_TEST
CALL >SWAP_TEST
CALL >CONST_TEST
CALL >PEEK_TEST
CALL >PUSH_TEST
GOTO >END


# ==============================================
# Stack Macro DROP
# Output 1 1

@DROP_TEST
LIT PUSH 1 PUSH 0 DROP OUT
DROP LIT PUSH 1 OUT
RET


# ==============================================
# Stack Macro DROP
# Output 1 1

@DROP1_TEST
LIT PUSH 1 PUSH 0 PUSH 1 DROP1 OUT OUT
RET


# ==============================================
# Stack Macro DUP
# Output 1 1

@DUP_TEST
LIT PUSH 1 DUP OUT OUT
RET


# ==============================================
# Stack Macro SWAP
# Output 1 2

@SWAP_TEST
LIT PUSH 1 PUSH 2 SWAP OUT OUT
RET


# ==============================================
# Stack Macro CONST3_0 CONST4_0 CONST3_1 CONST4_1
# Output 0 0 1 1

@CONST_TEST
CONST_12_0 OUT_12
CONST_16_0 OUT_16
CONST_12_1 OUT_12
CONST_16_1 OUT_16
RET


# ==============================================
# Stack Macro PEEK2 and PEEK3
# Output 0 2 1 0 0 3 2 1 0

@PEEK_TEST
LIT PUSH 0 PUSH 1 PUSH 2 PEEK2 OUT OUT OUT OUT
LIT PUSH 0 PUSH 1 PUSH 2 PUSH 3 PEEK3 OUT OUT OUT OUT OUT
RET


# ==============================================
# Stack Macro PUSH2, PUSH3, and PUSH4
# Output:
# 0 1 16 146 255
# 0 1 7 16 22 241 255 674 2450 4095
# 0 1 13 16 255 467 1278 43567 65535

@PUSH_TEST
LIT PUSH_8 0 OUT_8
LIT PUSH_8 1 OUT_8
LIT PUSH_8 16 OUT_8
LIT PUSH_8 146 OUT_8
LIT PUSH_8 255 OUT_8

LIT PUSH_12 0 OUT_12
LIT PUSH_12 1 OUT_12
LIT PUSH_12 7 OUT_12
LIT PUSH_12 16 OUT_12
LIT PUSH_12 22 OUT_12
LIT PUSH_12 241 OUT_12
LIT PUSH_12 255 OUT_12
LIT PUSH_12 674 OUT_12
LIT PUSH_12 2450 OUT_12
LIT PUSH_12 4095 OUT_12

LIT PUSH_16 0 OUT_16
LIT PUSH_16 1 OUT_16
LIT PUSH_16 13 OUT_16
LIT PUSH_16 16 OUT_16
LIT PUSH_16 255 OUT_16
LIT PUSH_16 467 OUT_16
LIT PUSH_16 1278 OUT_16
LIT PUSH_16 43567 OUT_16
LIT PUSH_16 65535 OUT_16

RET


@END

