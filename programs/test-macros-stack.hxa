# Testing stack macros

@START
CALL >DROP_TEST
CALL >DROP1_TEST
CALL >DUP_TEST
CALL >SWAP_TEST
CALL >CONST_TEST
CALL >PEEK_TEST
CALL >PUSH_TEST
GOTO >END


# ==============================================
# Stack Macro DROP
# Output 1 1

@DROP_TEST
LIT PUSH 1 PUSH 0 DROP OUT
DROP LIT PUSH 1 OUT
RET


# ==============================================
# Stack Macro DROP
# Output 1 1

@DROP1_TEST
LIT PUSH 1 PUSH 0 PUSH 1 DROP1 OUT OUT
RET


# ==============================================
# Stack Macro DUP
# Output 1 1

@DUP_TEST
LIT PUSH 1 DUP OUT OUT
RET


# ==============================================
# Stack Macro SWAP
# Output 1 2

@SWAP_TEST
LIT PUSH 1 PUSH 2 SWAP OUT OUT
RET


# ==============================================
# Stack Macro CONST3_0 CONST4_0 CONST3_1 CONST4_1
# Output 0 0 1 1

@CONST_TEST
CONST3_0 OUT12
CONST4_0 OUT16
CONST3_1 OUT12
CONST4_1 OUT16
RET


# ==============================================
# Stack Macro PEEK2 and PEEK3
# Output 0 2 1 0 0 3 2 1 0

@PEEK_TEST
LIT PUSH 0 PUSH 1 PUSH 2 PEEK2 OUT OUT OUT OUT
LIT PUSH 0 PUSH 1 PUSH 2 PUSH 3 PEEK3 OUT OUT OUT OUT OUT
RET


# ==============================================
# Stack Macro PUSH2, PUSH3, and PUSH4
# Output:
# 0 1 16 146 255
# 0 1 7 16 22 241 255 674 2450 4095
# 0 1 13 16 255 467 1278 43567 65535

@PUSH_TEST
LIT PUSH2 0 OUT8
LIT PUSH2 1 OUT8
LIT PUSH2 16 OUT8
LIT PUSH2 146 OUT8
LIT PUSH2 255 OUT8

LIT PUSH3 0 OUT12
LIT PUSH3 1 OUT12
LIT PUSH3 7 OUT12
LIT PUSH3 16 OUT12
LIT PUSH3 22 OUT12
LIT PUSH3 241 OUT12
LIT PUSH3 255 OUT12
LIT PUSH3 674 OUT12
LIT PUSH3 2450 OUT12
LIT PUSH3 4095 OUT12

LIT PUSH4 0 OUT16
LIT PUSH4 1 OUT16
LIT PUSH4 13 OUT16
LIT PUSH4 16 OUT16
LIT PUSH4 255 OUT16
LIT PUSH4 467 OUT16
LIT PUSH4 1278 OUT16
LIT PUSH4 43567 OUT16
LIT PUSH4 65535 OUT16

RET


@END

